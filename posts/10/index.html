
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Udooz!</title>
  <meta name="author" content="M Sheik Uduman Ali">

  
  <meta name="description" content="Erik Meijer, the man behind LINQ is now come up with a framework called &#8220;Rx Framework&#8221; which contains API those decorates LINQ2Objects as &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://udooz.github.io//blog/posts/10">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Udooz!" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">Udooz!</a></h1>
  
    <h2>technologies.each { |tech| write_post(tech.facets) if tech.facets</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:udooz.github.io//blog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/08/reactive-framework/">Reactive Framework and IObserverable<T></a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-03T00:00:00+05:30" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Erik Meijer, the man behind LINQ is now come up with a framework called &#8220;Rx Framework&#8221; which contains API those decorates LINQ2Objects as mathematics dual.  Let us see in details.</p>

<h3>LINQ2O and Mathematics Dual</h3>

<blockquote><p>Wikipedia says &#8220;A moprhism f:A->B is a monomorphism if  f.g=g.h implies g = h. Performing the dual operation, we get the statement that g.f = h.f  implies g = h. for a morphism f: B->A. This is precisely what is means for f to be an epimorphism. In short, the property of being a monomorphism is dual to the property of being an epimorphism.&#8221;</p></blockquote>

<p> LINQ to Objects is set of extension methods which enables to manipulate on a IEnumerable<T>.  From a layman point of view, a collection is nothing but a data source from where we are <em>pulling</em> data using LINQ to Objects and/or ofcourse for&#8230;each.  From duality, this is f:A->B.</p>

<p>It is very common that we need to notify a data source when new items need to be added or existing item to be updated either.  The interaction is happened either sychronously, but in general asychronously.  Since, we are living in non-deterministic, disconnected programming world.</p>

<p>Updating a data source would be based on some user-interaction in an application through event.  Event is programming world idiom for asynchronous invocation, or if you take any non-user interaction application which is again based on &#8220;event&#8221; driven architecture.  This model is based on GoF&#8217;s observer pattern.</p>

<h3>Observer Pattern</h3>

<blockquote><p>GoF says &#8220;Define a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically&#8221;.</p></blockquote>

<p><img class="alignnone size-full wp-image-150" style="border: black 1px solid;" title="Observer Pattern" src="http://udooz.github.io//blog/images/2009/08/rx_obsrv_pattern.png" alt="Observer Pattern" width="280" height="157" /></p>

<p>The observer those want to be notified whenever the subject undergoes a change in state should attach themselves with subject.  If you take button click event, we can write one or more event handlers.  Whenever a button clicked, it sends EventArgs to its subscribed observers (event handlers).</p>

<h3>Introducing IObservable and IObserver</h3>

<p>Let us  come back to the actual problem.  Since, IEnumerable<T> can only be used to pull data from a data source as read-only i.e f:A->B, here A is data source and B is my IEnumerable<T>.  However If I want  f: B->A which means that I would like to send/push data from &#8220;B&#8221; to &#8220;A&#8221;.  Here, I treat the callback or event handlers as &#8220;A&#8221; and the events as &#8220;B&#8221;.  It means that I need to push data to a data source as like as IEnumerable which is for pull.</p>

<p>As part of Reactive Framework, Meijar introduced two interfaces IObservable<T> and IObserver<T>.  Based on observer pattern, IObservable<T> is source.  See the following figure.</p>

<p><img class="alignnone size-full wp-image-151" style="border: black 1px solid;" title="IObserverable and Observer" src="http://udooz.github.io//blog/images/2009/08/rx_iobser_classes.png" alt="IObserverable and Observer" width="356" height="162" /></p>

<p>The  Subscribe() method is used to register one or more IObservers for notification which is similar to Subject.Attach() in the observer pattern.  The IDisposable is .NET idiom which mimics Source.Detach().  To understand the fundamental objective of these objects think in reverse in place with IEnumerable.  To traverse through the IObservable, create an IObserver, give it to an IObservable, and the IObservable “pushes” data into the IObserver by invoking its methods.</p>

<p>OnNext() is used to iterate over data sources and push the argument &#8220;value&#8221;.  OnCompleted() is post-iteration handler.</p>

<h3>An Example</h3>

<p>Theory is enough.  Let us see an example in Silverlight 3.0.  I create a button with mouse move event which acts as IObservable and create a TextBox which acts as IObserver.  Whenver a mouse moved on the button, the textbox observer appends coordinates into TextBox.Text property.</p>

<p>To create a mouse move observable, I used System.Linq.Observable which is used to create IObservables.  I extend the <span style="font-size: x-small;">System.Windows.Controls.Button with GetMouseMoves() which returns IObservable<Event>MouseEventArgs>></span><span style="font-size: x-small;"> like the following:</span></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">ButtonExtension</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">static</span> <span class="n">IObservable</span><span class="p">&gt;</span>
</span><span class='line'>      <span class="n">GetMouseMoves</span><span class="p">(</span><span class="k">this</span> <span class="n">Button</span> <span class="n">button</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">Observable</span><span class="p">.</span><span class="n">FromEvent</span><span class="p">((</span><span class="n">EventHandler</span> <span class="n">genericHandler</span><span class="p">)</span>
</span><span class='line'>          <span class="p">=&gt;</span> <span class="k">new</span> <span class="n">MouseEventHandler</span><span class="p">(</span><span class="n">genericHandler</span><span class="p">),</span>
</span><span class='line'>            <span class="n">mouseHandler</span> <span class="p">=&gt;</span> <span class="n">button</span><span class="p">.</span><span class="n">MouseMove</span> <span class="p">+=</span> <span class="n">mouseHandler</span><span class="p">,</span>
</span><span class='line'>            <span class="n">mouseHandler</span> <span class="p">=&gt;</span> <span class="n">button</span><span class="p">.</span><span class="n">MouseMove</span> <span class="p">-=</span> <span class="n">mouseHandler</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p> <span style="font-size: x-small;">The FromEvent() overload takes three Action(s) as arguments. One to convert from a generic event handler (EventHandler) to MouseEventHandler.  Remaining two register/unregister.  </span>For observers, I create a custom observer for handling mouse coordinates like</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">CoordinateObserver</span> <span class="p">:</span> <span class="n">IObserver</span><span class="p">&lt;</span><span class="n">Event</span><span class="p">&lt;</span><span class="n">MouseEventArgs</span><span class="p">&gt;&gt;</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">TextBox</span> <span class="n">CoordinateTextBox</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'> 
</span><span class='line'>
</span><span class='line'>    <span class="cp">#region IObserver&lt;Event&lt;MouseEventArgs&gt;&gt; Members</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">void</span> <span class="n">OnCompleted</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">void</span> <span class="n">OnError</span><span class="p">(</span><span class="n">Exception</span> <span class="n">exception</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">void</span> <span class="n">OnNext</span><span class="p">(</span><span class="n">Event</span><span class="p">&lt;</span><span class="n">MouseEventArgs</span><span class="p">&gt;</span> <span class="k">value</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">CoordinateTextBox</span><span class="p">.</span><span class="n">Text</span> <span class="p">+=</span> <span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">Clicked</span> <span class="n">at</span> <span class="p">({</span><span class="m">0</span><span class="p">},{</span><span class="m">1</span><span class="p">})</span><span class="err">\</span><span class="n">n</span><span class="p">&amp;</span><span class="n">quot</span><span class="p">;,</span>
</span><span class='line'>          <span class="k">value</span><span class="p">.</span><span class="n">EventArgs</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">(</span><span class="n">CoordinateTextBox</span><span class="p">).</span><span class="n">X</span><span class="p">,</span>
</span><span class='line'>          <span class="k">value</span><span class="p">.</span><span class="n">EventArgs</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">(</span><span class="n">CoordinateTextBox</span><span class="p">).</span><span class="n">Y</span><span class="p">));</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cp">#endregion</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><span style="font-size: x-small;">I create an instance of CoordinateObserver and subscribes it to button&#8217;s GetMouseMoves()</span></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="n">rxButton</span><span class="p">.</span><span class="n">GetMouseMoves</span><span class="p">().</span><span class="n">Subscribe</span>
</span><span class='line'>  <span class="p">(</span><span class="k">new</span> <span class="n">CoordinateObserver</span> <span class="p">{</span> <span class="n">CoordinateTextBox</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">rxResult</span> <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>The results would be</p>

<p> <img class="alignnone size-full wp-image-154" style="border: black 1px solid;" title="The output" src="http://udooz.github.io//blog/images/2009/08/rx_result_example.png" alt="The output" width="329" height="292" /></p>

<h3>Download and Resources</h3>

<p>Till now, there is no official release of Reactive Framework.  However, The Silverlight 3.0 Unit Test Framework uses this which comes as part of Silverlight 3.0 Toolkit.  Assembly Name: System.Reactive.dll, which unfortunately builds with Silverlight&#8217;s System.Core, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e.  See the following image:</p>

<p><img class="alignnone size-full wp-image-155" style="border: black 1px solid;" title="Assembly" src="http://udooz.github.io//blog/images/2009/08/rx_assembly.png" alt="Assembly" width="97" height="158" /></p>

<ol>
<li>First download <a href="http://www.codeplex.com/Silverlight" target="_blank">Silverlight 3.0 Toolkit</a> and install it.</li>
<li>Extract source code from $Program Files$\Microsoft SDKs\Silverlight\v3.0\Toolkit\Jul09\Source\Source Code.zip.</li>
<li>Get the System.Reactive.dll from $Source Code Folder$\Binaries.</li>
</ol>


<p>The full source code of the example is available at <a href="http://www.udooz.net/index.php?option=com_docman&task=doc_download&gid=5&Itemid=5" target="_blank"><a href="http://www.udooz.net/index.php?option=com_docman&amp;task=doc_download&amp;gid=5&amp;Itemid=5">http://www.udooz.net/index.php?option=com_docman&amp;task=doc_download&amp;gid=5&amp;Itemid=5</a></a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/visual-webgui-empty-client-aspnet/">Visual WebGUI and Empty Client Model for RIA</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-27T00:00:00+05:30" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So many frameworks, tools and platforms available for us to develop RIA applications.  One such framework from Gizmox is &#8220;Visual Web GUI&#8221; which provides unified approach to develop web applications using ASP.NET platform with &#8220;Empty-Client&#8221; model. </p>

<blockquote><p>The catchy point is you do not need to know too much about underlying technology.  You can also port WinForm applications into web.</p></blockquote>

<p>You could be a win form developer or web developer.</p>

<h3>How does it different from others?</h3>

<p>Since I did not fully evaulate this platform, I can simply say &#8220;this framework clearly segregates the responsibilities between browser and server&#8221;.  Server does business processing and browser handles user interaction.  Looks very adhoc and no different.  Gizmox is termed this as &#8220;empty client&#8221;.</p>

<h3>Empty Client</h3>

<p>We are known and worked with &#8220;Thick&#8221;, &#8220;Thin&#8221; and &#8220;Fat&#8221; clients.  Empty?  Points taken from their web site is</p>

<blockquote><p>The Empty Client approach combines for the first time on web, the best of both desktop and web environments. An optimized protocol makes server side power, typically achieved with &#8220;Thin client&#8221; available for data centric web applications, with &#8220;Thick Client&#8221; scalability and performance.</p></blockquote>

<p>They assured that this framework lets developers create desktop-like Web applications in no time using their existing skill sets with no re-learning, no retooling, and without the traditional complexities of the web. It also eliminates traditional security concerns, by facilitating literally Empty clients &#8211; no open services, no data, no logic, or any other exposed security hazards are left on the client.</p>

<p>The server is all in their approach.  Client only captures data and send it to server, and display data from server.  Even server provides display format of the data.</p>

<blockquote><p>This model is mainly useful in cloud computing.  However, I do not know wy making the powerful client as &#8220;dump&#8221; and overloading the server.</p></blockquote>

<p>Visit <a href="http://www.visualwebgui.com/Developers/Introduction/tabid/556/Default.aspx">http://www.visualwebgui.com/Developers/Introduction/tabid/556/Default.aspx</a> for more details.<br/>
<a style="display:none" rel="tag" href="http://udooz.net/blog/2009/07/visual-webgui-empty-client-aspnet/">codeproject</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/wcf-ilist-serialization-issue/">IList and Round-trip Serialization Issue in WCF</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-26T00:00:00+05:30" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Problem</h3>

<p>WCF throws System.ExecutionEngineException when deserializing and consuming data contracts with IList based attributes.</p>

<h3>Forces</h3>

<ul>
<li>Collection is changed as immutable when using IList<T></li>
<li>Unable to convert it to List<T></li>
<li>Unable to send it back to service consumer if required</li>
</ul>


<h3>Solution</h3>

<p>Let us define a data contract Dump which contains IList of InternalDump.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na"> </span>
</span><span class='line'><span class="na">[DataContract]</span>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">InternalDump</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="na">    [DataMember]</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Part</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[DataContract]</span>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Dump</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="na">    [DataMember]</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span><span class="p">;</span>
</span><span class='line'><span class="na">    [DataMember]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">InternalDump</span><span class="p">&gt;</span> <span class="n">Parts</span><span class="p">;</span>
</span><span class='line'> 
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="n">Dump</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">Parts</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">InternalDump</span><span class="p">&gt;();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>I&#8217;ve declared a simple WCF service</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[ServiceContract]</span>
</span><span class='line'><span class="k">public</span> <span class="k">interface</span> <span class="n">IService1</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="na">    [OperationContract]</span>
</span><span class='line'>    <span class="n">Dump</span> <span class="n">GetData</span><span class="p">(</span><span class="n">Dump</span> <span class="n">d</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'> 
</span><span class='line'>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Service1</span> <span class="p">:</span> <span class="n">IService1</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">Dump</span> <span class="n">GetData</span><span class="p">(</span><span class="n">Dump</span> <span class="n">d</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>       
</span><span class='line'>        <span class="k">return</span> <span class="n">d</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p> You are noticed that GetData just returns the deserialized &#8220;d&#8221; as a return value to the consumer.  Being a .NET client, the consumer of this service as</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="n">Dump</span> <span class="n">d</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dump</span><span class="p">();</span>
</span><span class='line'><span class="n">d</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&quot;Roundtrip&quot;</span><span class="p">;</span>
</span><span class='line'><span class="n">InternalDump</span> <span class="n">id</span> <span class="p">=</span> <span class="k">new</span> <span class="n">InternalDump</span><span class="p">();</span>
</span><span class='line'><span class="n">id</span><span class="p">.</span><span class="n">Part</span> <span class="p">=</span> <span class="s">&quot;Client&quot;</span><span class="p">;</span>
</span><span class='line'><span class="n">d</span><span class="p">.</span><span class="n">Parts</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</span><span class='line'> 
</span><span class='line'>
</span><span class='line'><span class="n">ServiceReference1</span><span class="p">.</span><span class="n">Service1Client</span> <span class="n">sc</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DumpConsole</span><span class="p">.</span><span class="n">ServiceReference1</span><span class="p">.</span><span class="n">Service1Client</span><span class="p">();</span>
</span><span class='line'><span class="n">Dump</span> <span class="n">sd</span> <span class="p">=</span> <span class="n">sc</span><span class="p">.</span><span class="n">GetData</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">foreach</span> <span class="p">(</span><span class="n">InternalDump</span> <span class="n">id2</span> <span class="k">in</span> <span class="n">sd</span><span class="p">.</span><span class="n">Parts</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">id2</span><span class="p">.</span><span class="n">Part</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>At the consumer side, a new instance of Dump and InternalDump have been created, serialized and send it as input parameter for GetData.  At the service side, the probelm is when deserializing the IList<InternalDump>, WCF internally convert it into InternalDump[] which makes all the problem 1 and 2 mentioned in Forces section.</p>

<blockquote><p>The problem is not in any of the above code, instead WCF itself.  The world&#8217;s so extensible ESB (enterprise service bus) framework assumed and convert IList<T> into T[] for platform neutral.</p></blockquote>

<p>Unfortunately, do not know the root cause of problem 3 mentioned in &#8220;Forces&#8221; section.  The solution is not the technical one, but a guideline.</p>

<p><strong>Don&#8217;t use IList<T> for the above mentioned probelms.  Instead use List<T>.</strong></p>

<p>Hope WCF in .NET 4.0 will resolve this issue.</p>

<p><a style="display:none" rel="tag" href="http://udooz.net/blog/2009/07/wcf-ilist-serialization-issue/">codeproject </a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/aspnet-4-live-data-binding-using/">ASP.NET AJAX 4.0: Live Data Binding using Template</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-03T00:00:00+05:30" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>Source code for this article can be downloaded from <a href="http://udooz.net/index.php?option=com_docman&task=doc_download&gid=2&Itemid=5" target="_blank"><a href="http://udooz.net/index.php?option=com_docman&amp;task=doc_download&amp;gid=2&amp;Itemid=5">http://udooz.net/index.php?option=com_docman&amp;task=doc_download&amp;gid=2&amp;Itemid=5</a></a></p></blockquote>

<p>This article is continuation of <a href="http://udooz.net/blog/2009/06/aspnet-template-programming">Part I</a>.  In this part, I explain the different data binding options in ASP.NET AJAX 4.0 templates.  Just a recap that I&#8217;ve consumed an ADO.NET data services to fetch AdventureWorks&#8217;s Product table records.  In this article, I explain how to update/add new record from client side.</p>

<h2>Bindings</h2>

<p>Template supports the following bindings:</p>

<ul>
<li>One-time &#8211; The expression is evaluated only once when the template rendering happen</li>
<li>One-way Live Binding &#8211; The expression is evaluated and update the value, if items in the data source changed</li>
<li>Two-way Live Binding &#8211; If the data source value changed, the value in the expression updated.  And if the value in the expression is updated, it will update data source also.</li>
</ul>


<p>The below diagram depicts the binding.</p>

<p><img class="alignnone size-full wp-image-127" title="ASP.NET 4.0 Live Binding" src="http://udooz.github.io//blog/images/2009/07/asp_live_binding_1.png" alt="ASP.NET 4.0 Live Binding" width="300" height="334" /></p>

<p>In the above diagram, the red dashed arrow shows one-time data binding.  Once the data from data source has been fetched by DataView using AdoNetDataContext.  The one-way live binding has  been shown as purple shadowed arrow.  The purpose shadow here is whenever a data updated at data source, it is being updated to data view through AdoNetDataContext.  The two-way live binding has been shown as  green shadowed two-head arrow.  In this case, data context should have the knowledge about update operation on data source and provide an interface to data view to send the modified values.</p>

<p>The these three bindings, ASP.NET AJAX provides the following expression convention:</p>

<ul>
<li> &#8211; One-time (can be used on any HTML controls for example <p></p>)</li>
<li>{ binding &lt;data_item_name> } &#8211; One-way if other than user input HTML controls for example <td>{ binding Name } &lt;/td)</li>
<li>{binding &lt;data_item_name> } &#8211; Two-way  if INPUT HTML controls for example <input type=&#8221;text&#8221; <span style="color: #0000ff;">sys:value</span>=&#8221;&#8221; />)</li>
</ul>


<p>Here, the input controls binds the values using <span style="color: #0000ff;">sys:value</span> attribute for two-way binding.</p>

<p>Before going into the updatable data source, let us see how can we design master-detail layout to display Product name and Product details.</p>

<h2>Master-Detail Layout</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'> 
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;body</span> <span class="na">xmlns:sys=</span><span class="s">&quot;javascript:Sys&quot;</span>
</span><span class='line'><span class="na">xmlns:dataview=</span><span class="s">&quot;javascript:Sys.UI.DataView&quot;</span>
</span><span class='line'><span class="na">sys:activate=</span><span class="s">&quot;*&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">&quot;form1&quot;</span> <span class="na">runat=</span><span class="s">&quot;server&quot;</span><span class="nt">&gt;</span>
</span><span class='line'> 
</span><span class='line'><span class="nt">&lt;div&gt;</span>
</span><span class='line'>      <span class="c">&lt;!--Master View--&gt;</span>
</span><span class='line'>     
</span><span class='line'><span class="nt">&lt;ul</span> <span class="na">sys:attach=</span><span class="s">&quot;dataview&quot;</span> <span class="na">class=</span><span class="s">&quot; sys-template&quot;</span>
</span><span class='line'>          <span class="na">dataview:autofetch=</span><span class="s">&quot;true&quot;</span>
</span><span class='line'>          <span class="na">dataview:dataprovider=</span><span class="s">&quot;&quot;</span>
</span><span class='line'>          <span class="na">dataview:fetchoperation=</span><span class="s">&quot;Products&quot;</span>
</span><span class='line'>          <span class="na">dataview:selecteditemclass=</span><span class="s">&quot;myselected&quot;</span>            
</span><span class='line'>          <span class="na">dataview:fetchparameters=</span><span class="s">&quot;&quot;</span>
</span><span class='line'>          <span class="na">dataview:sys-key=</span><span class="s">&quot;master&quot;</span>            
</span><span class='line'>      <span class="nt">&gt;</span>
</span><span class='line'>         
</span><span class='line'>  <span class="nt">&lt;li</span> <span class="na">sys:command=</span><span class="s">&quot;Select&quot;</span><span class="nt">&gt;</span>{binding Name }<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>     <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>      <span class="c">&lt;!--Detail View--&gt;</span>
</span><span class='line'>     
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;sys-template&quot;</span>
</span><span class='line'>          <span class="na">sys:attach=</span><span class="s">&quot;dataview&quot;</span>
</span><span class='line'>          <span class="na">dataview:autofetch=</span><span class="s">&quot;true&quot;</span>
</span><span class='line'>          <span class="na">dataview:data=</span><span class="s">&quot;{binding selectedData, source= }&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;fieldset&gt;</span>
</span><span class='line'>            <span class="nt">&lt;legend&gt;</span>{binding Name}<span class="nt">&lt;/legend&gt;</span>
</span><span class='line'>            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;detailsListPrice&quot;</span><span class="nt">&gt;</span>List Price:<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;detailsListPrice&quot;</span>
</span><span class='line'>                <span class="na">sys:value=</span><span class="s">&quot;{binding ListPrice}&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>           
</span><span class='line'>            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;detailsWeight&quot;</span><span class="nt">&gt;</span>Weight:<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;detailsWeight&quot;</span> <span class="na">sys:value=</span><span class="s">&quot;{binding Weight}&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>           
</span><span class='line'>             
</span><span class='line'>          <span class="nt">&lt;/fieldset&gt;</span>
</span><span class='line'>          <span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">&quot;dataContext.saveChanges()&quot;</span><span class="nt">&gt;</span>Save Changes<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>     <span class="nt">&lt;/div&gt;</span>
</span><span class='line'> <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/form&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Selectable And Editable</h3>

<p>An unordered list shows the master details, here the product name (line 15).   This line also indicates that the list item is selectable using <span style="color: #0000ff;">sys:command=&#8221;Select&#8221;</span>.   For maintaining master-detail or selectable item, primary key needs to be specified.  The  <span style="color: #0000ff;">sys-key</span>  property of data view refers that primary key.  In this example, I call the primary key as &#8220;master&#8221; (line 13).  Also, you can see that I&#8217;ve passed a filter option using <span style="color: #0000ff;">fetchparameter</span> property of data view (line 12).  In this example, I request the ADO.NET data service to give only top five records using its filter syntax.</p>

<p>Whenever an item in the master list is selected, the details view needs to be notified.  The widget for the details view and binding details should be identified using regular <span style="color: #0000ff;">sys:attach=&#8221;dataview&#8221;</span> and dataview&#8217;s <span style="color: #0000ff;">data</span> property.  In this example, <span style="color: #0000ff;">dataview:data=&#8221;{binding selectedData, source= }&#8221;</span> specifies that binding with data view with sys-key name &#8220;master&#8221;.  The fieldset is used to show set of values for a product.  Here, the list price and weight can be editable.</p>

<p>Once an item has been edited, this needs to be notified to the data source through data context.  The button with caption &#8220;Save Changes&#8221; specifies that whenver this button is clicked, save the items in the details view into data source through data context&#8217;s <span style="color: #0000ff;">saveChanges()</span> method.  The corresponding data source&#8217;s update option should be set on data context&#8217;s <span style="color: #0000ff;">set_saveOperation()</span>.  The following JavaScript code explains this.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err"> </span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">dataContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Sys</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">AdoNetDataContext</span><span class="p">();</span>
</span><span class='line'><span class="nx">dataContext</span><span class="p">.</span><span class="nx">set_serviceUri</span><span class="p">(</span><span class="s2">&quot;AWProductDataService.svc&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">dataContext</span><span class="p">.</span><span class="nx">set_saveOperation</span><span class="p">(</span><span class="s2">&quot;Products(master)&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">dataContext</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>The ADO.NET Product data service&#8217;s Products(id) method is used on set_saveOperation.  An item can be updated, when Product service of ADO.NET data service is being invoked with product primary key as argument.  Here, again I&#8217;m referring master layout&#8217;s &#8220;master&#8221; sys-key as primary key of Product.</p>

<p>The output of the above code is</p>

<p><img class="alignnone size-full wp-image-129" style="margin: 2px; border: black 1px solid;" title="ASP.NET 4.0 Live Binding" src="http://udooz.github.io//blog/images/2009/07/asp_live_binding_2.png" alt="ASP.NET 4.0 Live Binding" width="271" height="231" /></p>

<p>The top one is master view where Sport-100 Helmet, Red is selected and the details has been shown in the bottom page.  You can edit and update the data source.</p>

<p>The <span style="color: #0000ff;">selecteditemclass</span> property of data view is used to show the selected item.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/aspnet-template-programming/">ASP.NET AJAX 4.0: Template Programming Unleashed &#8211; Part I</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-28T00:00:00+05:30" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>Download the complete source code from <a href="http://udooz.net/index.php?option=com_docman&task=doc_download&gid=1&Itemid=5" target="_blank"><a href="http://udooz.net/index.php?option=com_docman&amp;task=doc_download&amp;gid=1&amp;Itemid=5">http://udooz.net/index.php?option=com_docman&amp;task=doc_download&amp;gid=1&amp;Itemid=5</a></a>.</p></blockquote>

<p>When Microsoft released its flavour of AJAX framework named &#8220;ASP.NET AJAX&#8221; as part of  ASP.NET 3.0 preview, it does not have much competency when comparing with other AJAX frameworks.  But when I evaluated ASP.NET AJAX 4.0, I was really inspired the new features that are completely focused your browser technologies such as XHTML and JavaScript.  Really admired the effort done by ASP.NET AJAX team.  There could not be any second opinion when you see the following features:</p>

<ul>
<li>Template based client side programming</li>
<li>DataView and DataContext</li>
<li>Live Data Binding</li>
</ul>


<h2>Template Programming</h2>

<blockquote><p>Template provides pattern to design a web UI form and enables to put placeholders for runtime data. </p></blockquote>

<p>For example, I&#8217;ve designed a web page to display AdventureWorks database Product data through ADO.NET data service.  The entity model (edmx) is</p>

<p><img class="alignnone size-full wp-image-120" title="AdventureWorks Product" src="http://udooz.github.io//blog/images/2009/06/asp_template_0.png" alt="AdventureWorks Product" width="206" height="373" /></p>

<p>The service code is</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'> 
</span><span class='line'>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">AWProductDataService</span> <span class="p">:</span> <span class="n">DataService</span><span class="p">&lt;</span><span class="n">AdventureWorksLT2008Entities</span><span class="p">&gt;</span>
</span><span class='line'><span class="p">{</span>   
</span><span class='line'>    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">InitializeService</span><span class="p">(</span><span class="n">IDataServiceConfiguration</span> <span class="n">config</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">config</span><span class="p">.</span><span class="n">SetEntitySetAccessRule</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="n">EntitySetRights</span><span class="p">.</span><span class="n">All</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>By ASP.NET templates, the page looks likes</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;body</span> <span class="na">xmlns:sys=</span><span class="s">&quot;javascript:Sys&quot;</span> <span class="na">xmlns:dataview=</span><span class="s">&quot;javascript:Sys.UI.DataView&quot;</span> <span class="na">sys:activate=</span><span class="s">&quot;*&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">&quot;form1&quot;</span> <span class="na">runat=</span><span class="s">&quot;server&quot;</span><span class="nt">&gt;</span>   
</span><span class='line'> 
</span><span class='line'><span class="nt">&lt;div&gt;</span> 
</span><span class='line'> 
</span><span class='line'><span class="nt">&lt;table</span> <span class="na">border=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>   
</span><span class='line'><span class="nt">&lt;thead&gt;</span>
</span><span class='line'>       
</span><span class='line'><span class="nt">&lt;tr&gt;</span>
</span><span class='line'>           
</span><span class='line'><span class="nt">&lt;td&gt;</span>Name<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>           
</span><span class='line'><span class="nt">&lt;td&gt;</span>List Price<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>           
</span><span class='line'><span class="nt">&lt;td&gt;</span>Size<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>           
</span><span class='line'><span class="nt">&lt;td&gt;</span>Weight<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>       <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>   <span class="nt">&lt;/thead&gt;</span>
</span><span class='line'>   
</span><span class='line'>   
</span><span class='line'><span class="nt">&lt;tbody</span> <span class="na">class=</span><span class="s">&quot;sys-template&quot;</span> <span class="na">sys:attach=</span><span class="s">&quot;dataview&quot;</span> <span class="na">dataview:autofetch=</span><span class="s">&quot;true&quot;</span>
</span><span class='line'>      <span class="na">dataview:dataprovider=</span><span class="s">&quot;&quot;</span>
</span><span class='line'>      <span class="na">dataview:fetchoperation=</span><span class="s">&quot;Products&quot;</span><span class="nt">&gt;</span>                
</span><span class='line'>     
</span><span class='line'><span class="nt">&lt;tr&gt;</span>
</span><span class='line'>       
</span><span class='line'><span class="nt">&lt;td&gt;</span>{binding Name }<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>       
</span><span class='line'><span class="nt">&lt;td&gt;</span>{binding ListPrice}<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>       
</span><span class='line'><span class="nt">&lt;td&gt;</span>{binding Size}<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>       
</span><span class='line'><span class="nt">&lt;td&gt;</span>{binding Weight}<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>     <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>   <span class="nt">&lt;/tbody&gt;</span>
</span><span class='line'> <span class="nt">&lt;/table&gt;</span>
</span><span class='line'> <span class="nt">&lt;/div&gt;</span>
</span><span class='line'> 
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span> 
</span></code></pre></td></tr></table></div></figure>


<p>I have used typical HTML table for displaying the data.  You can see some new attributes in <TBODY> and data place holders in <TD>.   ASP.NET AJAX 4.0 has a dedicated template engine to parse these new attributes and data place holders. </p>

<blockquote><p>ASP.NET AJAX has defined a rich set of attributes and data placeholder patterns collectively called as expression language which are none other than X(HT)ML and JavaScript.  Remarkable point here is its XHTML compliance, so these are not custom attributes in the regular HTML elements.</p></blockquote>

<p>The class attribute of the <TBODY> is set to <span style="color: #0000ff;">sys-template, </span>which is a convention used to hide the initial template from the user.</p>

<p>The fields or properties of a data item which is needed to be rendered on data place holders can be expressed by  or { }.</p>

<h2>DataContext</h2>

<p>Template requires data for its place holders as contexts.  The data context enables to bind any JavaScript array or objects to template. </p>

<blockquote><p>The real power of data context is to interact with JSON/ATOM based web services.</p></blockquote>

<p>ASP.NET AJAX provides two data contexts in MicrosoftAjaxAdoNet.js:</p>

<ul>
<li>Sys.Data.DataContext</li>
<li>Sys.Data.AdoNetDataContext</li>
</ul>


<p>The data context tracks all changes to the data automatically using new Sys.Observer object.  AdoNetDataContext supports additional features for ADO.NET data services such as identity management, links and association between entity sets.  The below code sample describes how to interact with AdventureWorks Product&#8217;s ADO.NET data service:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err"> </span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">dataContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Sys</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">AdoNetDataContext</span><span class="p">();</span>
</span><span class='line'><span class="nx">dataContext</span><span class="p">.</span><span class="nx">set_serviceUri</span><span class="p">(</span><span class="s2">&quot;AWProductDataService.svc&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">dataContext</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>The set_serviceUri() method is used to interact with WCF AJAX or ADO.NET data service.  The initialize() method does initialization or invocation.</p>

<h2>Data View</h2>

<p>This is the fundamental component for templates to display data defined in System.UI.DataView.  This is similar to server side data source component supports to bind any JavaScript object or array or to any ASP.NET AJAX component.  It has two properties to bind a data set:</p>

<ul>
<li>data &#8211; to bind a JavaScript array or object</li>
<li>dataprovider &#8211; to bind to a WCF service</li>
</ul>


<p>The fetchoperation property is used to set which method needs to be invoked for fetching data.  In the code snippet 1, I&#8217;ve set the dataContext declared in code snippet 2 as data source.  To run this application refer the following ASP.NET AJAX client side libraries:</p>

<ul>
<li> MicrosoftAjax.js</li>
<li>MicrosoftAjaxTemplates</li>
<li>MicrosoftAjaxAdoNet</li>
</ul>


<h2>How does it work</h2>

<p>The <span style="color: #0000ff;">xmlns:sys</span> declares the name space <span style="color: #0000ff;">Sys</span> for the entire page (Code 1. Line 2).  The <span style="color: #0000ff;">xmlns:dataview</span> declares DataView control.  A data view instance has been associated with <TBODY> using <span style="color: #0000ff;">sys:attach</span>.</p>

<p>The following figure shows the conceptual model of the template programming.</p>

<p> <img class="alignnone size-full wp-image-118" title="ASP.NET AJAX Template Model" src="http://udooz.github.io//blog/images/2009/06/asp_template.png" alt="ASP.NET AJAX Template Model" width="574" height="365" /></p>

<p>The output of the code is</p>

<p><img class="alignnone size-full wp-image-121" title="ASP.NET Template Output" src="http://udooz.github.io//blog/images/2009/06/asp_template_2.png" alt="ASP.NET Template Output" width="423" height="226" /></p>

<p>Part 2 will explain the live data binding and master-detail display with more features in data view and data context.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/posts/11">&larr; Older</a>
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/posts/9">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/06/dont-use-elephant-for-your-garden-work/">Don&#8217;t use elephant for your garden work</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/unpacking-apache-storm-in-developer-box/">Unpacking Apache Storm in developer box</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/book-review-heroku-up-and-running-by-neil-richard-oreilly/">Book Review &#8211; Heroku up and running by Neil &#038; Richard &#8211; O&#8217;Reilly</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/book-review-see-what-i-mean-oreilly/">Book Review &#8211; See What I Mean &#8211; O&#8217;Reilly</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/adopting-event-sourcing-in-saas-using-windows-azure/">Adopting Event Sourcing in SaaS using Windows Azure</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - M Sheik Uduman Ali -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
